# 구현 계획

- [ ] 1. Spring Boot 백엔드 프로젝트 설정
  - Spring Boot 3.x 프로젝트 생성 및 의존성 설정 (JPA, Security, OAuth2, Lombok, MySQL)
  - MySQL 연결 설정 및 JPA 구성
  - Spring Security 및 OAuth2 기본 설정
  - 기본 프로젝트 구조 생성
  - _요구사항: 5.5, 8.3_

- [ ] 2. 데이터베이스 스키마 및 엔티티 구현
  - [ ] 2.1 MySQL 테이블 스키마 생성
    - crosswalks, traffic_signals, accident_hotspots, crosswalk_signal_mapping, districts 테이블 생성
    - users, suggestions, suggestion_likes, suggestion_comments 테이블 생성
    - 인덱스 및 제약조건 설정
    - _요구사항: 5.4, 3.2, 8.1_

  - [ ] 2.2 기본 JPA 엔티티 클래스 구현
    - Crosswalk, TrafficSignal, AccidentHotspot, District 엔티티 작성
    - CrosswalkSignalMapping 엔티티 작성
    - Lombok 어노테이션 적용
    - _요구사항: 5.2, 5.3_

  - [ ] 2.3 사용자 및 건의사항 엔티티 구현
    - User, Role, Provider enum 구현
    - Suggestion, SuggestionLike, SuggestionComment 엔티티 작성
    - SuggestionType, SuggestionStatus enum 구현
    - _요구사항: 3.1, 3.2, 8.1_

  - [ ]* 2.4 속성 테스트 - 데이터 저장 무결성 작성
    - **속성 10: 데이터 저장 무결성**
    - **검증: 요구사항 5.4**

- [ ] 3. 데이터 처리 서비스 구현
  - [ ] 3.1 CSV 파싱 서비스 구현
    - 한글 인코딩 처리 로직
    - 필수 필드 검증 로직
    - _요구사항: 5.1, 5.2, 5.3_

  - [ ]* 3.2 속성 테스트 - CSV 파싱 라운드트립 작성
    - **속성 9: CSV 파싱 라운드트립**
    - **검증: 요구사항 5.1, 5.2, 5.3**

  - [ ] 3.3 데이터 임포트 서비스 구현
    - DataImportService 클래스 작성
    - 배치 처리 및 트랜잭션 관리
    - _요구사항: 5.4_

- [ ] 4. 점수 계산 엔진 구현
  - [ ] 4.1 시설 취약성 점수 계산 로직 구현
    - 음향신호기 없음 +2, 잔여시간표시기 없음 +1, 보행자작동신호기 없음 +1, 집중조명 없음 +1
    - calculateFacilityScore 메서드 구현
    - _요구사항: 6.1_

  - [ ]* 4.2 속성 테스트 - 취약성 점수 계산 작성
    - **속성 11: 취약성 점수 계산**
    - **검증: 요구사항 6.1**

  - [ ] 4.3 위험도 점수 계산 로직 구현
    - 거리별 가중치: 0-100m +3, 100-300m +2, 300-500m +1
    - Haversine 거리 계산 및 calculateRiskScore 메서드 구현
    - _요구사항: 6.2_

  - [ ]* 4.4 속성 테스트 - 위험도 점수 거리 기반 계산 작성
    - **속성 12: 위험도 점수 거리 기반 계산**
    - **검증: 요구사항 6.2**

  - [ ] 4.5 종합 점수 및 개선 추천 로직 구현
    - 최종 점수 = (시설취약점수 × 0.4) + (위험점수 × 0.6)
    - 가장 부족한 시설 우선 추천 로직
    - _요구사항: 6.3, 6.4_

  - [ ]* 4.6 속성 테스트 - 종합 점수 결합 작성
    - **속성 13: 종합 점수 결합**
    - **검증: 요구사항 6.3**

  - [ ]* 4.7 속성 테스트 - 개선 추천 우선순위 작성
    - **속성 14: 개선 추천 우선순위**
    - **검증: 요구사항 6.4**

- [ ] 5. OAuth2 인증 및 보안 구현
  - [ ] 5.1 Spring Security 설정 구현
    - SecurityConfig 클래스 작성
    - OAuth2 로그인 설정 (Google, Naver, Kakao)
    - CORS 및 CSRF 설정
    - _요구사항: 8.3_

  - [ ] 5.2 사용자 인증 서비스 구현
    - CustomOAuth2UserService 구현
    - OAuthAttributes 클래스 구현
    - 사용자 자동 등록 및 업데이트 로직
    - _요구사항: 8.3_

  - [ ] 5.3 권한 기반 접근 제어 구현
    - 역할별 API 접근 권한 설정
    - @PreAuthorize 어노테이션 적용
    - _요구사항: 8.3_

- [ ] 6. 체크포인트 - 백엔드 핵심 로직 테스트
  - 모든 테스트가 통과하는지 확인하고, 문제가 있으면 사용자에게 문의

- [ ] 7. 지역별 대시보드 API 구현
  - [ ] 7.1 지역별 통계 API 구현
    - 시도/구 파라미터를 받는 대시보드 통계 엔드포인트
    - 지역별 실시간 데이터 조회 로직
    - _요구사항: 1.2, 1.4, 4.1_

  - [ ]* 7.2 속성 테스트 - 대시보드 통계 정확성 작성
    - **속성 1: 대시보드 통계 정확성**
    - **검증: 요구사항 1.4**

  - [ ] 7.3 히트맵 데이터 API 구현
    - 사고 다발지역 히트맵 데이터 엔드포인트
    - 지역별 필터링 및 밀도 계산 로직
    - _요구사항: 1.1, 4.2_

  - [ ] 7.4 인터랙티브 지도 데이터 API 구현
    - 지역별 횡단보도, 신호등 조회 엔드포인트
    - 3단계 확대 지원 (전국→시도→구)
    - _요구사항: 1.2, 1.3_

- [ ] 8. 신호등 효과 분석 API 구현
  - [ ] 8.1 신호등 유무별 사고 분석 서비스 구현
    - 신호등이 있는/없는 횡단보도 주변 사고율 비교
    - 통계적 유의성 검증 로직
    - _요구사항: 2.1, 2.2_

  - [ ]* 8.2 속성 테스트 - 신호등 효과 분석 작성
    - **속성 2: 신호등 효과 분석 정확성**
    - **검증: 요구사항 2.1, 2.2**

  - [ ] 8.3 지역별 효과 분석 API 구현
    - 선택된 지역 내 신호등 설치 효과 분석
    - 시각화용 데이터 생성
    - _요구사항: 2.3, 2.4_

- [ ] 9. 건의사항 관리 API 구현
  - [ ] 9.1 건의사항 CRUD API 구현
    - 건의사항 생성, 조회, 수정 엔드포인트
    - 페이징 및 필터링 지원
    - _요구사항: 3.1, 3.2_

  - [ ] 9.2 건의사항 상호작용 API 구현
    - 좋아요, 댓글 기능 엔드포인트
    - 조회수 증가 로직
    - _요구사항: 3.5_

  - [ ] 9.3 관리자 건의사항 관리 API 구현
    - 건의사항 상태 변경 엔드포인트
    - 관리자 답변 및 처리 로직
    - _요구사항: 8.1, 8.2, 8.3_

  - [ ]* 9.4 속성 테스트 - 건의사항 관리 작성
    - **속성 3: 건의사항 상태 관리 정확성**
    - **검증: 요구사항 3.2, 8.3**

- [ ] 7. Next.js 프론트엔드 프로젝트 설정




  - Next.js 14 프로젝트 생성 및 TypeScript 설정
  - Tailwind CSS, Leaflet, Chart.js 의존성 설치
  - 기본 프로젝트 구조 및 라우팅 설정
  - _요구사항: 7.1_

- [ ] 11. Next.js 프론트엔드 프로젝트 설정
  - Next.js 14 프로젝트 생성 및 TypeScript 설정
  - Tailwind CSS, Leaflet, Chart.js, React-Query 의존성 설치
  - OAuth2 인증을 위한 NextAuth.js 설정
  - 기본 프로젝트 구조 및 라우팅 설정
  - _요구사항: 7.1_

- [ ] 12. Next.js API 라우트 구현
  - [ ] 12.1 백엔드 프록시 API 라우트 작성
    - 대시보드 통계, 지도 데이터, 분석 데이터 프록시
    - 환경변수를 통한 백엔드 URL 설정
    - _요구사항: 1.4, 2.1, 4.1_

  - [ ] 12.2 인증 관련 API 라우트 구현
    - NextAuth.js 설정 및 OAuth2 프로바이더 연동
    - 세션 관리 및 토큰 처리
    - _요구사항: 8.3_

  - [ ]* 12.3 속성 테스트 - 로딩 상태 표시 작성
    - **속성 15: 로딩 상태 표시**
    - **검증: 요구사항 7.3**

- [ ] 13. 인터랙티브 지도 UI 구현
  - [ ] 13.1 3단계 확대 지도 컴포넌트 구현
    - Leaflet 지도 통합 및 전국→시도→구 확대 기능
    - 지역 클릭 시 자동 확대 및 통계 업데이트
    - _요구사항: 1.1, 1.2, 1.3_

  - [ ] 13.2 히트맵 레이어 구현
    - 사고 다발지역 밀도 기반 히트맵 표시
    - 지역별 히트맵 데이터 동적 로딩
    - _요구사항: 1.1, 4.2_

  - [ ] 13.3 지역별 통계 패널 구현
    - 선택된 지역의 실시간 통계 표시
    - 횡단보도 수, 신호등 설치율, 사고 건수 등
    - _요구사항: 1.4, 4.1_

- [ ] 14. 신호등 효과 분석 UI 구현
  - [ ] 14.1 신호등 효과 분석 대시보드 구현
    - 신호등 유무별 사고율 비교 차트
    - 통계적 유의성 표시
    - _요구사항: 2.1, 2.2_

  - [ ] 14.2 지역별 효과 분석 컴포넌트 구현
    - 선택된 지역 내 신호등 설치 효과 시각화
    - 인터랙티브 차트 및 지도 연동
    - _요구사항: 2.3, 2.4_

- [ ] 15. 건의사항 게시판 UI 구현
  - [ ] 15.1 건의사항 목록 및 상세 페이지 구현
    - 건의사항 목록 페이지 (페이징, 필터링, 정렬)
    - 건의사항 상세 페이지 (지도 위치 표시)
    - _요구사항: 3.1, 3.4_

  - [ ] 15.2 건의사항 작성 폼 구현
    - 지도에서 위치 선택 기능
    - 건의 유형 및 내용 입력 폼
    - 현재 시설 현황 자동 표시
    - _요구사항: 3.2, 3.3_

  - [ ] 15.3 건의사항 상호작용 기능 구현
    - 좋아요, 댓글 기능
    - 실시간 상호작용 업데이트
    - _요구사항: 3.5_

  - [ ] 15.4 관리자 건의사항 관리 페이지 구현
    - 건의사항 상태 관리 대시보드
    - 관리자 답변 및 처리 기능
    - 건의사항 통계 및 현황 표시
    - _요구사항: 8.1, 8.2, 8.4_

- [ ] 16. 개선 우선순위 분석 UI 구현
  - [ ] 16.1 우선순위 테이블 컴포넌트 구현
    - 사고 빈도, 신호등 미설치, 시민 건의 종합 점수 표시
    - 지역별 필터링 및 정렬 기능
    - _요구사항: 4.3, 4.4_

- [ ] 17. 데이터 임포트 기능 구현
  - [ ] 17.1 CSV 파일 업로드 UI 구현
    - 드래그 앤 드롭 파일 업로드
    - 업로드 진행률 표시
    - 오류 메시지 표시
    - _요구사항: 5.1_

  - [ ] 17.2 데이터 검증 및 미리보기 기능
    - 업로드된 데이터 미리보기 테이블
    - 필드 매핑 및 검증 결과 표시
    - _요구사항: 5.2, 5.3_

- [ ] 18. 사용자 인증 및 권한 관리 UI 구현
  - [ ] 18.1 로그인/로그아웃 UI 구현
    - OAuth2 로그인 버튼 (Google, Naver, Kakao)
    - 사용자 프로필 표시 및 로그아웃 기능
    - _요구사항: 8.3_

  - [ ] 18.2 권한별 UI 제어 구현
    - 일반 사용자 vs 관리자 메뉴 분리
    - 권한에 따른 기능 접근 제어
    - _요구사항: 8.3_

- [ ] 19. 최종 체크포인트 - 전체 시스템 테스트
  - 모든 테스트가 통과하는지 확인하고, 문제가 있으면 사용자에게 문의

- [ ] 20. 반응형 디자인 및 사용자 경험 개선
  - [ ] 20.1 모바일 및 태블릿 최적화
    - 반응형 레이아웃 구현
    - 터치 제스처 지원
    - _요구사항: 7.1, 7.2_

  - [ ] 20.2 로딩 상태 및 오류 처리 UI
    - 스켈레톤 로더 구현
    - 오류 바운더리 및 재시도 로직
    - _요구사항: 7.3_

- [ ] 21. 성능 최적화 및 배포 준비
  - [ ] 21.1 Next.js 빌드 최적화
    - 이미지 최적화 및 코드 스플리팅
    - 정적 생성 및 서버 사이드 렌더링 설정
    - _요구사항: 7.1_

  - [ ] 21.2 Spring Boot 프로덕션 설정
    - 프로덕션 데이터베이스 설정
    - 로깅 및 모니터링 구성
    - _요구사항: 5.5_

- [ ] 22. 확장 기능 구현 (선택사항)
  - [ ]* 22.1 실시간 알림 시스템 구현
    - 건의사항 상태 변경 시 사용자 알림
    - 웹소켓 또는 Server-Sent Events 활용
    - _확장 기능_

  - [ ]* 22.2 건의사항 지도 클러스터링 구현
    - 유사한 위치의 건의사항 그룹화 표시
    - 클러스터 클릭 시 상세 목록 표시
    - _확장 기능_

  - [ ]* 22.3 스쿨존 연계 분석 기능
    - 어린이 보호구역 데이터 연동
    - 스쿨존 내 시설 우선순위 강화
    - _확장 기능_

  - [ ]* 22.4 개선 시나리오 What-if 분석
    - 특정 시설 설치 시 점수 변화 시뮬레이션
    - 예산 대비 효과 분석 UI
    - _확장 기능_