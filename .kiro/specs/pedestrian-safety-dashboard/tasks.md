# 구현 계획

- [ ] 1. Spring Boot 백엔드 프로젝트 설정
  - Spring Boot 3.x 프로젝트 생성 및 의존성 설정 (JPA, Security, OAuth2, Lombok, MySQL)
  - MySQL 연결 설정 및 JPA 구성
  - Spring Security 및 OAuth2 기본 설정
  - 기본 프로젝트 구조 생성
  - _요구사항: 5.5, 8.3_

- [ ] 2. 데이터베이스 스키마 및 엔티티 구현
  - [ ] 2.1 기본 테이블 스키마 생성
    - crosswalks, traffic_signals, crosswalk_signal_mapping, districts 테이블 생성
    - users, suggestions, suggestion_likes, suggestion_comments 테이블 생성
    - 인덱스 및 제약조건 설정
    - _요구사항: 5.4, 3.2, 8.1_

  - [ ] 2.2 월별 사고 데이터 테이블 구현
    - monthly_accidents 테이블 생성 (시도별·시군구별·월별 사고 데이터)
    - accident_hotspots 테이블 생성 (사고 다발지역 분석)
    - 월별 데이터 인덱싱 및 성능 최적화
    - _요구사항: 1.1, 1.4, 2.1_

  - [ ] 2.3 고급 분석 기능 테이블 구현
    - accident_predictions 테이블 생성 (사고 예측 데이터)
    - investment_plans, investment_items 테이블 생성 (투자 계획)
    - alert_notifications 테이블 생성 (알림 시스템)
    - _요구사항: 9.1, 10.1, 11.1_

  - [ ] 2.4 기본 JPA 엔티티 클래스 구현
    - Crosswalk, TrafficSignal, District 엔티티 작성
    - MonthlyAccident, AccidentHotspot 엔티티 작성
    - Lombok 어노테이션 적용
    - _요구사항: 5.2, 5.3, 1.4_

  - [ ] 2.5 사용자 및 건의사항 엔티티 구현
    - User, Role, Provider enum 구현
    - Suggestion, SuggestionLike, SuggestionComment 엔티티 작성
    - SuggestionType, SuggestionStatus enum 구현
    - _요구사항: 3.1, 3.2, 8.1_

  - [ ] 2.6 고급 분석 엔티티 구현
    - AccidentPrediction, InvestmentPlan, InvestmentItem 엔티티 작성
    - AlertNotification 엔티티 및 관련 enum 구현
    - 예측 및 투자 관련 데이터 모델 완성
    - _요구사항: 9.1, 10.1, 11.1_

  - [ ]* 2.7 속성 테스트 - 데이터 저장 무결성 작성
    - **속성 10: 데이터 저장 무결성**
    - **검증: 요구사항 5.4**

- [ ] 3. 데이터 처리 서비스 구현
  - [ ] 3.1 CSV 파싱 서비스 구현
    - 한글 인코딩 처리 로직
    - 필수 필드 검증 로직
    - _요구사항: 5.1, 5.2, 5.3_

  - [ ]* 3.2 속성 테스트 - CSV 파싱 라운드트립 작성
    - **속성 9: CSV 파싱 라운드트립**
    - **검증: 요구사항 5.1, 5.2, 5.3**

  - [ ] 3.3 데이터 임포트 서비스 구현
    - DataImportService 클래스 작성
    - 배치 처리 및 트랜잭션 관리
    - _요구사항: 5.4_

- [ ] 4. 점수 계산 엔진 구현
  - [ ] 4.1 시설 취약성 점수 계산 로직 구현
    - 음향신호기 없음 +2, 잔여시간표시기 없음 +1, 보행자작동신호기 없음 +1, 집중조명 없음 +1
    - calculateFacilityScore 메서드 구현
    - _요구사항: 6.1_

  - [ ]* 4.2 속성 테스트 - 취약성 점수 계산 작성
    - **속성 11: 취약성 점수 계산**
    - **검증: 요구사항 6.1**

  - [ ] 4.3 위험도 점수 계산 로직 구현
    - 거리별 가중치: 0-100m +3, 100-300m +2, 300-500m +1
    - Haversine 거리 계산 및 calculateRiskScore 메서드 구현
    - _요구사항: 6.2_

  - [ ]* 4.4 속성 테스트 - 위험도 점수 거리 기반 계산 작성
    - **속성 12: 위험도 점수 거리 기반 계산**
    - **검증: 요구사항 6.2**

  - [ ] 4.5 종합 점수 및 개선 추천 로직 구현
    - 최종 점수 = (시설취약점수 × 0.4) + (위험점수 × 0.6)
    - 가장 부족한 시설 우선 추천 로직
    - _요구사항: 6.3, 6.4_

  - [ ]* 4.6 속성 테스트 - 종합 점수 결합 작성
    - **속성 13: 종합 점수 결합**
    - **검증: 요구사항 6.3**

  - [ ]* 4.7 속성 테스트 - 개선 추천 우선순위 작성
    - **속성 14: 개선 추천 우선순위**
    - **검증: 요구사항 6.4**

- [ ] 5. OAuth2 인증 및 보안 구현
  - [ ] 5.1 Spring Security 설정 구현
    - SecurityConfig 클래스 작성
    - OAuth2 로그인 설정 (Google, Naver, Kakao)
    - CORS 및 CSRF 설정
    - _요구사항: 8.3_

  - [ ] 5.2 사용자 인증 서비스 구현
    - CustomOAuth2UserService 구현
    - OAuthAttributes 클래스 구현
    - 사용자 자동 등록 및 업데이트 로직
    - _요구사항: 8.3_

  - [ ] 5.3 권한 기반 접근 제어 구현
    - 역할별 API 접근 권한 설정
    - @PreAuthorize 어노테이션 적용
    - _요구사항: 8.3_

- [ ] 6. 체크포인트 - 백엔드 핵심 로직 테스트
  - 모든 테스트가 통과하는지 확인하고, 문제가 있으면 사용자에게 문의

- [ ] 7. 월별 데이터 기반 지역별 대시보드 API 구현
  - [ ] 7.1 월별 사고 데이터 API 구현
    - 시도/구/월 파라미터를 받는 월별 사고 통계 엔드포인트
    - 월별 트렌드 및 계절성 분석 로직
    - _요구사항: 1.1, 1.4, 1.5_

  - [ ] 7.2 KPI 대시보드 API 구현
    - 신호등 설치율, 사고 감소율, 안전 지수 계산
    - 지역별 KPI 비교 및 트렌드 분석
    - _요구사항: 1.5, 4.1_

  - [ ]* 7.3 속성 테스트 - 월별 데이터 정확성 작성
    - **속성 1: 월별 데이터 집계 정확성**
    - **검증: 요구사항 1.4**

  - [ ] 7.4 사고 다발지역 분석 API 구현
    - 다발지역 식별 및 신호등 설치 현황 매핑
    - 신호등 기능별 안전 효과 분석
    - _요구사항: 2.1, 2.2_

  - [ ] 7.5 인터랙티브 지도 데이터 API 구현
    - 지역별 횡단보도, 신호등 조회 엔드포인트
    - 3단계 확대 지원 (전국→시도→구)
    - 월별 필터링 지원
    - _요구사항: 1.2, 1.3_

- [ ] 8. 사고 예측 및 분석 API 구현
  - [ ] 8.1 사고 예측 모델 서비스 구현
    - 월별 사고 데이터 기반 예측 알고리즘
    - 신뢰구간 및 예측 정확도 계산
    - _요구사항: 9.1, 9.3_

  - [ ] 8.2 신호등 설치 효과 시뮬레이션 구현
    - 특정 위치 신호등 설치 시 사고 감소 효과 모델링
    - 다양한 시나리오별 효과 분석
    - _요구사항: 9.2_

  - [ ]* 8.3 속성 테스트 - 예측 모델 정확성 작성
    - **속성 2: 예측 모델 정확성 검증**
    - **검증: 요구사항 9.4**

  - [ ] 8.4 월별 트렌드 및 계절성 분석 구현
    - 계절별, 월별 사고 패턴 분석
    - 신호등 설치 효과의 시간적 변화 분석
    - _요구사항: 2.3, 2.4_

- [ ] 9. 투자 최적화 및 계획 API 구현
  - [ ] 9.1 투자 계획 관리 API 구현
    - 투자 계획 생성, 수정, 승인 엔드포인트
    - ROI 계산 및 우선순위 분석
    - _요구사항: 10.1, 10.3_

  - [ ] 9.2 투자 최적화 알고리즘 구현
    - 예산 제약 하에서 최적 투자 조합 계산
    - 우선순위 기반 투자 항목 추천
    - _요구사항: 10.2_

  - [ ] 9.3 투자 효과 시뮬레이션 구현
    - 투자 계획별 예상 사고 감소 효과 계산
    - 비용 대비 편익 분석
    - _요구사항: 10.3_

  - [ ] 9.4 투자 보고서 자동 생성 구현
    - 투자 계획서, 효과 보고서 자동 생성
    - 단계별 실행 로드맵 생성
    - _요구사항: 10.4_

  - [ ]* 9.5 속성 테스트 - 투자 최적화 정확성 작성
    - **속성 3: 투자 최적화 알고리즘 정확성**
    - **검증: 요구사항 10.2**

- [ ] 10. 실시간 모니터링 및 알림 시스템 구현
  - [ ] 10.1 알림 시스템 구현
    - 사고 급증, 새로운 다발지역 감지 알림
    - 예측 기반 위험 알림 생성
    - _요구사항: 11.1, 11.2_

  - [ ] 10.2 실시간 모니터링 대시보드 구현
    - 실시간 사고 현황, 위험 지역 순위 표시
    - 대응 필요 지역 식별 및 표시
    - _요구사항: 11.3_

  - [ ] 10.3 대응 이력 관리 시스템 구현
    - 사고 발생 후 조치 사항 기록
    - 개선 효과 측정 및 추적
    - _요구사항: 11.4_

- [ ] 11. 건의사항 관리 API 구현
  - [ ] 11.1 건의사항 CRUD API 구현
    - 건의사항 생성, 조회, 수정 엔드포인트
    - 페이징 및 필터링 지원
    - _요구사항: 3.1, 3.2_

  - [ ] 11.2 건의사항 상호작용 API 구현
    - 좋아요, 댓글 기능 엔드포인트
    - 조회수 증가 로직
    - _요구사항: 3.5_

  - [ ] 11.3 관리자 건의사항 관리 API 구현
    - 건의사항 상태 변경 엔드포인트
    - 관리자 답변 및 처리 로직
    - _요구사항: 8.1, 8.2, 8.3_

  - [ ]* 11.4 속성 테스트 - 건의사항 관리 작성
    - **속성 4: 건의사항 상태 관리 정확성**
    - **검증: 요구사항 3.2, 8.3**

- [ ] 7. Next.js 프론트엔드 프로젝트 설정




  - Next.js 14 프로젝트 생성 및 TypeScript 설정
  - Tailwind CSS, Leaflet, Chart.js 의존성 설치
  - 기본 프로젝트 구조 및 라우팅 설정
  - _요구사항: 7.1_

- [x] 12. Next.js 프론트엔드 프로젝트 설정
  - Next.js 16 프로젝트 생성 및 TypeScript 설정
  - Tailwind CSS, Leaflet, Chart.js, React-Query, D3.js 의존성 설치
  - OAuth2 인증을 위한 NextAuth.js 설정
  - 기본 프로젝트 구조 및 라우팅 설정 (App Router)
  - _요구사항: 7.1_

- [ ] 13. Next.js API 라우트 구현
  - [ ] 13.1 백엔드 프록시 API 라우트 작성
    - 월별 데이터, KPI, 예측 분석 데이터 프록시
    - 환경변수를 통한 백엔드 URL 설정
    - _요구사항: 1.4, 9.1, 10.1_

  - [ ] 13.2 인증 관련 API 라우트 구현
    - NextAuth.js 설정 및 OAuth2 프로바이더 연동
    - 권한별 세션 관리 및 토큰 처리
    - _요구사항: 8.3_

  - [ ]* 13.3 속성 테스트 - 로딩 상태 표시 작성
    - **속성 5: 로딩 상태 표시**
    - **검증: 요구사항 7.3**

- [ ] 14. KPI 중심 대시보드 UI 구현
  - [ ] 14.1 KPI 대시보드 컴포넌트 구현
    - 신호등 설치율, 사고 감소율, 안전 지수 표시
    - 지역별 KPI 비교 및 트렌드 차트
    - _요구사항: 1.5, 4.1_

  - [ ] 14.2 월별 트렌드 분석 UI 구현
    - 월별 사고 데이터 시계열 차트
    - 계절성 및 패턴 분석 시각화
    - _요구사항: 1.4, 2.3_

  - [ ] 14.3 지역별 통계 패널 구현
    - 선택된 지역의 월별 통계 및 KPI 표시
    - 실시간 데이터 업데이트 및 필터링
    - _요구사항: 1.2, 1.3_

- [ ] 15. 인터랙티브 지도 UI 구현
  - [ ] 15.1 3단계 확대 지도 컴포넌트 구현
    - Leaflet 지도 통합 및 전국→시도→구 확대 기능
    - 지역 클릭 시 자동 확대 및 통계 업데이트
    - 월별 필터링 지원
    - _요구사항: 1.1, 1.2, 1.3_

  - [ ] 15.2 사고 다발지역 시각화 구현
    - 다발지역별 신호등 설치 현황 매핑
    - 위험도 등급별 색상 구분 표시
    - _요구사항: 2.1, 2.2_

  - [ ] 15.3 월별 데이터 레이어 구현
    - 월별 사고 데이터 동적 로딩 및 표시
    - 시계열 애니메이션 기능
    - _요구사항: 1.1, 1.4_

- [ ] 16. 예측 분석 및 시뮬레이션 UI 구현
  - [ ] 16.1 사고 예측 대시보드 구현
    - 미래 사고 위험도 예측 차트
    - 신뢰구간 및 예측 정확도 표시
    - _요구사항: 9.1, 9.3_

  - [ ] 16.2 신호등 설치 효과 시뮬레이션 UI 구현
    - 특정 위치 신호등 설치 시 효과 시뮬레이션
    - 인터랙티브 시나리오 분석 도구
    - _요구사항: 9.2_

  - [ ] 16.3 예측 모델 성능 모니터링 UI 구현
    - 예측 정확도 추적 및 시각화
    - 모델 성능 지표 대시보드
    - _요구사항: 9.4_

- [ ] 17. 투자 최적화 및 계획 UI 구현
  - [ ] 17.1 투자 계획 관리 대시보드 구현
    - 투자 계획 생성, 수정, 승인 인터페이스
    - ROI 계산 결과 시각화
    - _요구사항: 10.1, 10.3_

  - [ ] 17.2 투자 최적화 도구 구현
    - 예산 제약 조건 설정 인터페이스
    - 최적 투자 조합 추천 결과 표시
    - _요구사항: 10.2_

  - [ ] 17.3 투자 효과 시뮬레이션 UI 구현
    - 투자 시나리오별 효과 비교 차트
    - 비용 대비 편익 분석 시각화
    - _요구사항: 10.3_

  - [ ] 17.4 투자 보고서 생성 UI 구현
    - 자동 보고서 생성 및 다운로드 기능
    - 실행 로드맵 시각화
    - _요구사항: 10.4_

- [ ] 18. 실시간 모니터링 및 알림 UI 구현
  - [ ] 18.1 실시간 모니터링 대시보드 구현
    - 실시간 사고 현황 및 위험 지역 표시
    - 대응 필요 지역 우선순위 표시
    - _요구사항: 11.3_

  - [ ] 18.2 알림 시스템 UI 구현
    - 실시간 알림 표시 및 관리
    - 알림 설정 및 필터링 기능
    - _요구사항: 11.1, 11.2_

  - [ ] 18.3 대응 이력 관리 UI 구현
    - 사고 대응 조치 기록 인터페이스
    - 개선 효과 추적 및 시각화
    - _요구사항: 11.4_

- [ ] 19. 건의사항 게시판 UI 구현
  - [ ] 19.1 건의사항 목록 및 상세 페이지 구현
    - 건의사항 목록 페이지 (페이징, 필터링, 정렬)
    - 건의사항 상세 페이지 (지도 위치 표시)
    - _요구사항: 3.1, 3.4_

  - [ ] 19.2 건의사항 작성 폼 구현
    - 지도에서 위치 선택 기능
    - 건의 유형 및 내용 입력 폼
    - 현재 시설 현황 자동 표시
    - _요구사항: 3.2, 3.3_

  - [ ] 19.3 건의사항 상호작용 기능 구현
    - 좋아요, 댓글 기능
    - 실시간 상호작용 업데이트
    - _요구사항: 3.5_

  - [ ] 19.4 관리자 건의사항 관리 페이지 구현
    - 건의사항 상태 관리 대시보드
    - 관리자 답변 및 처리 기능
    - 건의사항 통계 및 현황 표시
    - _요구사항: 8.1, 8.2, 8.4_

- [ ] 20. 신호등 기능 분석 UI 구현
  - [ ] 20.1 신호등 기능별 효과 분석 대시보드 구현
    - 음향신호기, 잔여시간표시기 등 기능별 안전 효과 차트
    - 기능별 설치 현황 및 사고율 상관관계 시각화
    - _요구사항: 2.2, 2.4_

  - [ ] 20.2 다발지역 신호등 현황 매핑 UI 구현
    - 사고 다발지역별 신호등 설치 및 기능 현황 표시
    - 개선 우선순위 시각화
    - _요구사항: 2.1, 4.3_

- [ ] 21. 데이터 임포트 기능 구현
  - [ ] 21.1 월별 사고 데이터 업로드 UI 구현
    - 월별 사고 데이터 CSV 업로드 인터페이스
    - 데이터 검증 및 중복 체크 기능
    - _요구사항: 5.1, 1.4_

  - [ ] 21.2 데이터 검증 및 미리보기 기능
    - 업로드된 데이터 미리보기 테이블
    - 필드 매핑 및 검증 결과 표시
    - 월별 데이터 일관성 검증
    - _요구사항: 5.2, 5.3_

- [ ] 22. 사용자 인증 및 권한 관리 UI 구현
  - [x] 22.1 기본 레이아웃 및 인증 UI 구현
    - Root layout 구현 (app/layout.tsx)
    - Header 컴포넌트 구현 (네비게이션, 사용자 프로필)
    - 로그인 페이지 구현 (app/signin/page.tsx)
    - Root 페이지 구현 (app/page.tsx)
    - _요구사항: 8.3_

  - [x] 22.2 OAuth2 로그인 기능 구현
    - OAuth2 로그인 버튼 (Google, Naver, GitHub)
    - 사용자 프로필 표시 및 로그아웃 기능
    - _요구사항: 8.3_

  - [ ] 22.3 권한별 UI 제어 구현
    - ANALYST, MANAGER, ADMIN 권한별 메뉴 분리
    - 권한에 따른 기능 접근 제어
    - _요구사항: 8.3_

- [ ] 23. 최종 체크포인트 - 전체 시스템 테스트
  - 모든 테스트가 통과하는지 확인하고, 문제가 있으면 사용자에게 문의

- [ ] 24. 반응형 디자인 및 사용자 경험 개선
  - [ ] 24.1 모바일 및 태블릿 최적화
    - 반응형 레이아웃 구현
    - 터치 제스처 지원
    - 모바일용 차트 및 지도 최적화
    - _요구사항: 7.1, 7.2_

  - [ ] 24.2 로딩 상태 및 오류 처리 UI
    - 스켈레톤 로더 구현
    - 오류 바운더리 및 재시도 로직
    - 대용량 데이터 로딩 최적화
    - _요구사항: 7.3_

- [ ] 25. 성능 최적화 및 배포 준비
  - [ ] 25.1 Next.js 16 빌드 최적화
    - 이미지 최적화 및 코드 스플리팅
    - 정적 생성 및 서버 사이드 렌더링 설정
    - 월별 데이터 캐싱 전략 구현
    - Next.js 16 새로운 성능 최적화 기능 활용
    - _요구사항: 7.1_

  - [ ] 25.2 Spring Boot 프로덕션 설정
    - 프로덕션 데이터베이스 설정
    - 로깅 및 모니터링 구성
    - 예측 모델 성능 최적화
    - _요구사항: 5.5_

- [ ] 26. 확장 기능 구현 (선택사항)
  - [ ]* 26.1 고급 예측 모델 구현
    - 머신러닝 기반 사고 예측 모델 (LSTM, Random Forest)
    - 날씨, 교통량 등 외부 요인 고려
    - _확장 기능_

  - [ ]* 26.2 실시간 데이터 스트리밍 구현
    - 실시간 사고 데이터 스트리밍 처리
    - 웹소켓 기반 실시간 대시보드 업데이트
    - _확장 기능_

  - [ ]* 26.3 건의사항 지도 클러스터링 구현
    - 유사한 위치의 건의사항 그룹화 표시
    - 클러스터 클릭 시 상세 목록 표시
    - _확장 기능_

  - [ ]* 26.4 스쿨존 연계 분석 기능
    - 어린이 보호구역 데이터 연동
    - 스쿨존 내 시설 우선순위 강화
    - _확장 기능_

  - [ ]* 26.5 AI 기반 투자 추천 시스템
    - 강화학습 기반 최적 투자 전략 추천
    - 다목적 최적화 알고리즘 적용
    - _확장 기능_