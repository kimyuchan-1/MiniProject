# 구현 계획

- [ ] 1. Spring Boot 백엔드 프로젝트 설정
  - Spring Boot 3.x 프로젝트 생성 및 의존성 설정
  - MySQL 연결 설정 및 JPA 구성
  - 기본 프로젝트 구조 생성
  - _요구사항: 5.5_

- [ ] 2. 데이터베이스 스키마 및 엔티티 구현
  - [ ] 2.1 MySQL 테이블 스키마 생성
    - crosswalks, traffic_signals, accident_hotspots 테이블 생성
    - 인덱스 및 제약조건 설정
    - _요구사항: 5.4_

  - [ ] 2.2 JPA 엔티티 클래스 구현
    - Crosswalk, TrafficSignal, AccidentHotspot 엔티티 작성
    - 필드 검증 어노테이션 추가
    - _요구사항: 5.2, 5.3_

  - [ ]* 2.3 속성 테스트 - 데이터 저장 무결성 작성
    - **속성 10: 데이터 저장 무결성**
    - **검증: 요구사항 5.4**

- [ ] 3. 데이터 처리 서비스 구현
  - [ ] 3.1 CSV 파싱 서비스 구현
    - 한글 인코딩 처리 로직
    - 필수 필드 검증 로직
    - _요구사항: 5.1, 5.2, 5.3_

  - [ ]* 3.2 속성 테스트 - CSV 파싱 라운드트립 작성
    - **속성 9: CSV 파싱 라운드트립**
    - **검증: 요구사항 5.1, 5.2, 5.3**

  - [ ] 3.3 데이터 임포트 서비스 구현
    - DataImportService 클래스 작성
    - 배치 처리 및 트랜잭션 관리
    - _요구사항: 5.4_

- [ ] 4. 점수 계산 엔진 구현
  - [ ] 4.1 시설 취약성 점수 계산 로직 구현
    - 음향신호기 없음 +2, 잔여시간표시기 없음 +1, 보행자작동신호기 없음 +1, 집중조명 없음 +1
    - calculateFacilityScore 메서드 구현
    - _요구사항: 6.1_

  - [ ]* 4.2 속성 테스트 - 취약성 점수 계산 작성
    - **속성 11: 취약성 점수 계산**
    - **검증: 요구사항 6.1**

  - [ ] 4.3 위험도 점수 계산 로직 구현
    - 거리별 가중치: 0-100m +3, 100-300m +2, 300-500m +1
    - Haversine 거리 계산 및 calculateRiskScore 메서드 구현
    - _요구사항: 6.2_

  - [ ]* 4.4 속성 테스트 - 위험도 점수 거리 기반 계산 작성
    - **속성 12: 위험도 점수 거리 기반 계산**
    - **검증: 요구사항 6.2**

  - [ ] 4.5 종합 점수 및 개선 추천 로직 구현
    - 최종 점수 = (시설취약점수 × 0.4) + (위험점수 × 0.6)
    - 가장 부족한 시설 우선 추천 로직
    - _요구사항: 6.3, 6.4_

  - [ ]* 4.6 속성 테스트 - 종합 점수 결합 작성
    - **속성 13: 종합 점수 결합**
    - **검증: 요구사항 6.3**

  - [ ]* 4.7 속성 테스트 - 개선 추천 우선순위 작성
    - **속성 14: 개선 추천 우선순위**
    - **검증: 요구사항 6.4**

- [ ] 5. 체크포인트 - 백엔드 핵심 로직 테스트
  - 모든 테스트가 통과하는지 확인하고, 문제가 있으면 사용자에게 문의

- [ ] 6. REST API 컨트롤러 구현
  - [ ] 6.1 대시보드 통계 API 구현
    - DashboardController의 통계 엔드포인트 작성
    - 실시간 데이터 조회 로직
    - _요구사항: 1.1, 1.2, 1.3_

  - [ ]* 6.2 속성 테스트 - 대시보드 통계 정확성 작성
    - **속성 1: 대시보드 통계 정확성**
    - **검증: 요구사항 1.1, 1.2, 1.3**

  - [ ]* 6.3 속성 테스트 - 데이터 일관성 작성
    - **속성 2: 데이터 일관성**
    - **검증: 요구사항 1.3**

  - [ ] 6.4 지도 데이터 API 구현
    - 횡단보도, 신호등, 사고다발지역 조회 엔드포인트
    - 레이어별 필터링 로직
    - _요구사항: 2.1, 2.2, 2.3, 2.4_

  - [ ]* 6.5 속성 테스트 - 레이어 토글 동작 작성
    - **속성 3: 레이어 토글 동작**
    - **검증: 요구사항 2.2**

  - [ ]* 6.6 속성 테스트 - 지도 요소 상세 정보 작성
    - **속성 4: 지도 요소 상세 정보**
    - **검증: 요구사항 2.3, 2.4**

  - [ ] 6.7 분석 데이터 API 구현
    - 산점도 데이터 생성 엔드포인트
    - 구/동별 집계 로직
    - _요구사항: 3.1, 3.2, 3.3_

  - [ ]* 6.8 속성 테스트 - 산점도 축 배치 작성
    - **속성 5: 산점도 축 배치**
    - **검증: 요구사항 3.2**

  - [ ] 6.9 개선 후보 테이블 API 구현
    - 상위 20곳 조회, 필터링, 정렬 엔드포인트
    - _요구사항: 4.1, 4.2, 4.3_

  - [ ]* 6.10 속성 테스트 - 개선 후보 정렬 및 제한 작성
    - **속성 6: 개선 후보 정렬 및 제한**
    - **검증: 요구사항 4.1**

  - [ ]* 6.11 속성 테스트 - 테이블 필터링 작성
    - **속성 7: 테이블 필터링**
    - **검증: 요구사항 4.2**

  - [ ]* 6.12 속성 테스트 - 테이블 정렬 작성
    - **속성 8: 테이블 정렬**
    - **검증: 요구사항 4.3**

- [ ] 7. Next.js 프론트엔드 프로젝트 설정
  - Next.js 14 프로젝트 생성 및 TypeScript 설정
  - Tailwind CSS, Leaflet, Chart.js 의존성 설치
  - 기본 프로젝트 구조 및 라우팅 설정
  - _요구사항: 7.1_

- [ ] 8. Next.js API 라우트 구현
  - [ ] 8.1 백엔드 프록시 API 라우트 작성
    - 대시보드 통계, 지도 데이터, 분석 데이터 프록시
    - 환경변수를 통한 백엔드 URL 설정
    - _요구사항: 1.1, 2.1, 3.1_

  - [ ]* 8.2 속성 테스트 - 로딩 상태 표시 작성
    - **속성 15: 로딩 상태 표시**
    - **검증: 요구사항 7.3**

- [ ] 9. 대시보드 UI 컴포넌트 구현
  - [ ] 9.1 통계 개요 카드 컴포넌트 구현
    - 횡단보도 수, 신호등 비율, 미설치 비율 표시
    - 실시간 데이터 업데이트 로직
    - _요구사항: 1.1, 1.2_

  - [ ] 9.2 지도 뷰 컴포넌트 구현
    - Leaflet 지도 통합
    - 레이어 토글 UI
    - 클릭 이벤트 처리 및 상세 패널
    - _요구사항: 2.1, 2.2, 2.3, 2.4_

  - [ ] 9.3 분석 차트 컴포넌트 구현
    - Chart.js를 사용한 산점도 및 히스토그램
    - 반응형 차트 레이아웃
    - _요구사항: 3.1, 3.2, 3.3_

- [ ] 10. 개선 후보 테이블 UI 구현
  - [ ] 10.1 필터링 및 정렬 기능이 있는 테이블 컴포넌트
    - 점수, 구, 취약항목별 필터
    - 다중 컬럼 정렬 지원
    - 페이지네이션 구현
    - _요구사항: 4.1, 4.2, 4.3_

- [ ] 11. 데이터 임포트 기능 구현
  - [ ] 11.1 CSV 파일 업로드 UI 구현
    - 드래그 앤 드롭 파일 업로드
    - 업로드 진행률 표시
    - 오류 메시지 표시
    - _요구사항: 5.1_

  - [ ] 11.2 데이터 검증 및 미리보기 기능
    - 업로드된 데이터 미리보기 테이블
    - 필드 매핑 및 검증 결과 표시
    - _요구사항: 5.2, 5.3_

- [ ] 12. 최종 체크포인트 - 전체 시스템 테스트
  - 모든 테스트가 통과하는지 확인하고, 문제가 있으면 사용자에게 문의

- [ ] 13. 반응형 디자인 및 사용자 경험 개선
  - [ ] 13.1 모바일 및 태블릿 최적화
    - 반응형 레이아웃 구현
    - 터치 제스처 지원
    - _요구사항: 7.1, 7.2_

  - [ ] 13.2 로딩 상태 및 오류 처리 UI
    - 스켈레톤 로더 구현
    - 오류 바운더리 및 재시도 로직
    - _요구사항: 7.3_

- [ ] 14. 성능 최적화 및 배포 준비
  - [ ] 14.1 Next.js 빌드 최적화
    - 이미지 최적화 및 코드 스플리팅
    - 정적 생성 및 서버 사이드 렌더링 설정
    - _요구사항: 7.1_

  - [ ] 14.2 Spring Boot 프로덕션 설정
    - 프로덕션 데이터베이스 설정
    - 로깅 및 모니터링 구성
    - _요구사항: 5.5_

- [ ] 15. 확장 기능 구현 (선택사항)
  - [ ]* 15.1 스쿨존 연계 분석 기능
    - 어린이 보호구역 데이터 연동
    - 스쿨존 내 시설 가중치 1.5배 적용
    - _확장 기능_

  - [ ]* 15.2 스마트 횡단보도 레이어 추가
    - 바닥형 신호등, 스마트 보행신호기 현황 표시
    - 별도 지도 레이어로 구현
    - _확장 기능_

  - [ ]* 15.3 개선 시나리오 What-if 분석
    - 특정 시설 설치 시 점수 변화 시뮬레이션
    - 예산 대비 효과 분석 UI
    - _확장 기능_